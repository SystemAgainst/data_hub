<script setup lang="ts">
defineProps<{
  id: number
  title: string
  coverUrl?: string | null
  updatedAt: string
  totalCost?: string | number
  participantsCount?: number
  updated_by_name?: string
}>()

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ru-RU', {
    day: 'numeric',
    month: 'long',
    hour: '2-digit',
    minute: '2-digit',
  })
}
</script>

<template>
  <div
    class="bg-dark-surface group cursor-pointer overflow-hidden rounded-xl border border-white/5 shadow-md transition-transform active:scale-[0.99]"
    @click="$emit('click')"
  >
    <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
    <div v-if="coverUrl" class="relative h-40 w-full overflow-hidden">
      <img
        :src="coverUrl"
        alt="Cover"
        class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
      />
      <div
        class="from-dark-surface absolute inset-0 bg-gradient-to-t to-transparent opacity-60"
      ></div>
    </div>

    <!-- –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ—Ç -->
    <div
      v-else
      class="bg-dark-surface flex h-24 items-center justify-center border-b border-white/5"
    >
      <span class="text-4xl">üìÅ</span>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="p-4">
      <h3 class="text-dark-text mb-2 text-lg leading-tight font-bold">{{ title }}</h3>

      <!-- –¶–µ–Ω–∞ (–ê–∫—Ü–µ–Ω—Ç) -->
      <p v-if="totalCost" class="text-primary mb-3 font-semibold">
        {{ Number(totalCost).toLocaleString('ru-RU') }} ‚ÇΩ
      </p>

      <!-- –ü–æ–¥–≤–∞–ª –∫–∞—Ä—Ç–æ—á–∫–∏ (–î–∞—Ç–∞ –∏ –ª—é–¥–∏) -->
      <div class="text-dark-muted mt-2 flex flex-col border-t border-white/5 pt-3 text-xs">
        <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ formatDate(updatedAt) }}</span>
        <span>–ö–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–æ: {{ updated_by_name }}</span>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
        <div v-if="participantsCount" class="flex items-center gap-1">
          üë• {{ participantsCount }}
        </div>
      </div>
    </div>
  </div>
</template>
