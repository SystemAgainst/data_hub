<script setup lang="ts">
// –û–ø–∏—Å—ã–≤–∞–µ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∞
defineProps<{
  id: number
  title: string
  coverUrl?: string | null // –ö–∞—Ä—Ç–∏–Ω–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å null
  updatedAt: string
  totalCost?: string | number // –ü–æ–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  participantsCount?: number // –°–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –≤ –ø—Ä–æ–µ–∫—Ç–µ
}>()

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ru-RU', {
    day: 'numeric',
    month: 'long',
    hour: '2-digit',
    minute: '2-digit',
  })
}
</script>

<template>
  <div
    class="bg-dark-surface rounded-xl overflow-hidden border border-white/5 shadow-md active:scale-[0.99] transition-transform cursor-pointer group"
    @click="$emit('click')"
  >
    <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
    <div v-if="coverUrl" class="h-40 w-full overflow-hidden relative">
      <img
        :src="coverUrl"
        alt="Cover"
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
      />
      <div
        class="absolute inset-0 bg-gradient-to-t from-dark-surface to-transparent opacity-60"
      ></div>
    </div>

    <!-- –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ—Ç -->
    <div
      v-else
      class="h-24 bg-dark-surface border-b border-white/5 flex items-center justify-center"
    >
      <span class="text-4xl">üìÅ</span>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="p-4">
      <h3 class="text-lg font-bold text-dark-text leading-tight mb-2">{{ title }}</h3>

      <!-- –¶–µ–Ω–∞ (–ê–∫—Ü–µ–Ω—Ç) -->
      <p v-if="totalCost" class="text-primary font-semibold mb-3">
        {{ Number(totalCost).toLocaleString('ru-RU') }} ‚ÇΩ
      </p>

      <!-- –ü–æ–¥–≤–∞–ª –∫–∞—Ä—Ç–æ—á–∫–∏ (–î–∞—Ç–∞ –∏ –ª—é–¥–∏) -->
      <div
        class="flex items-center justify-between text-xs text-dark-muted mt-2 border-t border-white/5 pt-3"
      >
        <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ formatDate(updatedAt) }}</span>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
        <div v-if="participantsCount" class="flex items-center gap-1">
          üë• {{ participantsCount }}
        </div>
      </div>
    </div>
  </div>
</template>
