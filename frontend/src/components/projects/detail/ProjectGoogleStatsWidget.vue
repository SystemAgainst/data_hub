<script setup lang="ts">
import AppWidget from '@/components/ui/AppWidget.vue'

defineProps<{
  stats: any // –ú–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ç–∏–ø, –Ω–æ –ø–æ–∫–∞ any
  isLoading: boolean
  sheetUrl?: string
}>()
</script>

<template>
  <AppWidget title="–°–≤–æ–¥–∫–∞ (Google Sheets)" icon="üìä" :clickable="false" :external-link="sheetUrl">
    <!-- –°–∫–µ–ª–µ—Ç–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div v-if="isLoading" class="mt-2 animate-pulse space-y-3">
      <div class="h-6 w-1/2 rounded bg-white/10"></div>
      <div class="h-4 w-3/4 rounded bg-white/10"></div>
      <div class="h-4 w-full rounded bg-white/10"></div>
    </div>

    <!-- –î–∞–Ω–Ω—ã–µ -->
    <div v-else-if="stats" class="mt-2 space-y-4">
      <!-- –ò–¢–û–ì–û -->
      <div class="flex items-end justify-between border-b border-white/5 pb-3">
        <div>
          <div class="text-dark-muted mb-1 text-xs">–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
          <div class="text-primary font-mono text-xl font-bold tracking-tight md:text-2xl">
            {{ stats.total_spent }} ‚ÇΩ
          </div>
        </div>
        <div class="text-right">
          <div class="text-dark-muted mb-1 text-xs">–î–Ω–µ–π</div>
          <div class="text-lg font-medium text-white">{{ stats.total_days }}</div>
        </div>
      </div>

      <!-- –°–ü–ò–°–û–ö -->
      <div class="space-y-2">
        <div class="text-dark-muted text-xs">–†–∞—Å—Ö–æ–¥—ã –ø–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º:</div>
        <div
          v-for="(p, index) in stats.participants"
          :key="index"
          class="group flex items-center justify-between text-sm"
        >
          <span class="text-gray-300 transition-colors group-hover:text-white">{{ p.name }}</span>
          <span class="group-hover:text-primary font-mono text-gray-400 transition-colors">{{
            p.amount
          }}</span>
        </div>
      </div>
    </div>

    <!-- –ü—É—Å—Ç–æ -->
    <div v-else class="text-dark-muted py-6 text-center text-sm">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
  </AppWidget>
</template>
